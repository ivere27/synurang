// Code generated by protoc-gen-synurang-ffi. DO NOT EDIT.

import 'dart:async';
import 'dart:typed_data';
import 'package:synurang/synurang.dart' as synurang;
import '{{.PbDartFile}}';
{{- range .ExternalImports}}
import '{{.}}';
{{- end}}
{{range $svc := .Services}}
class {{$svc.GoName}}Ffi {
{{- range $m := .Methods}}
{{- if $m.IsUnary}}
  static Future<{{$m.OutputType}}> {{$m.Name}}({{$m.InputType}} request) async {
    final bytes = request.writeToBuffer();
    final resultBytes = await synurang.invokeBackendAsync('{{$m.FullMethodName}}', bytes);
    return {{$m.OutputType}}.fromBuffer(resultBytes);
  }
{{else if $m.IsServerStreaming}}
  static Stream<{{$m.OutputType}}> {{$m.Name}}({{$m.InputType}} request) {
    final bytes = request.writeToBuffer();
    return synurang.invokeBackendServerStream('{{$m.FullMethodName}}', bytes)
        .map((data) => {{$m.OutputType}}.fromBuffer(data));
  }
{{else if $m.IsClientStreaming}}
  static Future<{{$m.OutputType}}> {{$m.Name}}(Stream<{{$m.InputType}}> requests) async {
    final resultBytes = await synurang.invokeBackendClientStream('{{$m.FullMethodName}}',
        requests.map((r) => r.writeToBuffer()));
    return {{$m.OutputType}}.fromBuffer(resultBytes);
  }
{{else}}
  static Stream<{{$m.OutputType}}> {{$m.Name}}(Stream<{{$m.InputType}}> requests) {
    return synurang.invokeBackendBidiStream('{{$m.FullMethodName}}',
        requests.map((r) => r.writeToBuffer()))
        .map((data) => {{$m.OutputType}}.fromBuffer(data));
  }
{{end}}
{{- end}}
}
{{end}}